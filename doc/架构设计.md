**架构设计**

本项目采用模块化架构设计，主要分为以下几个核心模块：

- 剪切板管理：负责监控系统剪切板的变化、操作修改剪切板内容。
- 存储：负责持久化历史记录（文本、图片、文件路径）。
- 交互：用户界面，用于搜索、预览和选择条目。
- 配置：管理用户设置和偏好。

# 剪切板管理

- 检测剪切板内容变更。
- 回写剪切板。

可以有一些扩展策略：

- 敏感过滤: 检测是否来自密码管理软件（如 1Password/Bitwarden），如果是则忽略，保护隐私。
- 去重逻辑: 连续两次相同的内容不应重复记录。

> 技术选型：
>
> - 剪切板 API：[clipboard-rs](https://github.com/ChurchTao/clipboard-rs)

# 存储

- 持久化存储剪切板历史记录（专有数据模型）。
- 支持模糊查询。
- 支持自定义排序规则。

> 技术选型
>
> - 数据库：[sled](https://github.com/spacejam/sled)
> - 检索模型：[tantivy](https://github.com/tantivy-search/tantivy)

# 交互

- 全局快捷键唤起窗口。
- 托盘图标: 需要一个 System Tray 图标来管理退出和设置。
- 列表展示历史记录，支持搜索和预览。
- 支持键盘导航和选择。
- 选中后回写剪切板并触发粘贴操作。

> 技术选型
>
> - UI 库：[gpui](https://github.com/longbridge/gpui-component)

# 配置

- 管理用户偏好设置（如快捷键、存储上限等）。
- 提供配置界面供用户修改设置。

> 技术选型
>
> - 配置管理：[config-rs](https://github.com/rust-cli/config-rs)

# 实现思路

1. 初始化剪切板监听器，持续监控剪切板内容变化。
2. 当检测到变化时，应用敏感过滤和去重逻辑。
3. 将新的剪切板内容存储到数据库中。
4. 提供全局快捷键，唤起交互界面。
5. 在交互界面中，用户可以搜索和选择历史记录。
6. 选中条目后，回写剪切板并触发粘贴操作。
7. 提供配置界面，允许用户自定义设置。
